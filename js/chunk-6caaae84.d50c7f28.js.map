{"version":3,"sources":["webpack:///./src/views/category/components/GoodsItem.vue","webpack:///./src/views/category/components/GoodsItem.vue?b361","webpack:///./src/views/category/components/GoodsList.vue?3d78","webpack:///./src/views/category/components/SubSort.vue?4a06","webpack:///./src/views/category/SubCategoryPage.vue","webpack:///./src/views/category/components/SubFilter.vue","webpack:///./src/views/category/components/SubFilter.vue?e58e","webpack:///./src/views/category/components/SubSort.vue","webpack:///./src/views/category/components/SubSort.vue?30f1","webpack:///./src/views/category/components/GoodsList.vue","webpack:///./src/views/category/components/GoodsList.vue?cff6","webpack:///./src/views/category/SubCategoryPage.vue?5fa5","webpack:///./src/views/category/components/SubFilter.vue?702f","webpack:///./src/api/category.js","webpack:///./src/views/category/SubCategoryPage.vue?5d63","webpack:///./src/views/category/components/GoodsItem.vue?12d6"],"names":["class","to","goods","id","src","picture","alt","name","desc","price","props","type","Object","default","__exports__","render","path","category","topCategory","mode","key","subCategory","onFilterSortChanged","goodsList","items","loading","finished","loadMore","filters","filterLoading","brands","brand","href","selectedBrandId","saleProperties","item","properties","property","selectedFilterName","width","height","setup","emit","route","useFilters","getData","updateSelectedFilters","params","selectedFilters","brandId","attrs","value","forEach","push","groupName","propertyName","then","data","result","unshift","className","updateSortParams","sortParams","sortField","sortMethod","inventory","$event","onlyDiscount","useSort","target","components","GoodsItem","Array","GoodsList","SubSort","SubFilter","AppLayout","useBread","useGoodsList","store","state","list","children","reqParams","categoryId","page","pageSize","pages","getTopCategoryById","requestWithoutToken","getSubCategoryFilters","getGoodsList"],"mappings":"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","file":"js/chunk-6caaae84.d50c7f28.js","sourcesContent":["<template>\n  <RouterLink :to=\"`/goods/${goods.id}`\" class=\"goods-item\">\n    <img :src=\"goods.picture\" alt=\"\" />\n    <p class=\"name ellipsis\">{{ goods.name }}</p>\n    <p class=\"desc ellipsis\">{{ goods.desc }}</p>\n    <p class=\"price\">&yen;{{ goods.price }}</p>\n  </RouterLink>\n</template>\n\n<script>\nexport default {\n  name: \"GoodsItem\",\n  props: {\n    goods: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.goods-item {\n  display: block;\n  width: 220px;\n  padding: 20px 30px;\n  text-align: center;\n  .hoverShadow();\n  img {\n    width: 160px;\n    height: 160px;\n  }\n  p {\n    padding-top: 10px;\n  }\n  .name {\n    font-size: 16px;\n  }\n  .desc {\n    color: #999;\n    height: 29px;\n  }\n  .price {\n    color: @priceColor;\n    font-size: 20px;\n  }\n}\n</style>\n","import { render } from \"./GoodsItem.vue?vue&type=template&id=bef1b662&scoped=true\"\nimport script from \"./GoodsItem.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsItem.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsItem.vue?vue&type=style&index=0&id=bef1b662&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/Little-Rabbit-web/Little-Rabbit-web/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bef1b662\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GoodsList.vue?vue&type=style&index=0&id=6b7e7fba&scoped=true&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SubSort.vue?vue&type=style&index=0&id=a2bbccea&scoped=true&lang=less\"","<template>\n  <AppLayout>\n    <div class=\"container\">\n      <XtxBread>\n        <XtxBreadItem path=\"/\">首页</XtxBreadItem>\n        <XtxBreadItem :path=\"`/category/${category.topCategory?.id}`\">{{\n          category.topCategory?.name\n        }}</XtxBreadItem>\n        <transition name=\"fade-right\" mode=\"out-in\">\n          <XtxBreadItem :key=\"category.subCategory?.id\">\n            {{ category.subCategory?.name }}\n          </XtxBreadItem>\n        </transition>\n      </XtxBread>\n      <!-- 筛选条件组件 -->\n      <SubFilter @onFilterChanged=\"onFilterSortChanged\" />\n      <div class=\"goods-list\">\n        <!-- 排序组件 -->\n        <SubSort @onSortChanged=\"onFilterSortChanged\" />\n        <!-- 商品列表组件 -->\n        <GoodsList :goods=\"goodsList.items\" v-if=\"goodsList\" />\n        <!-- 无限列表加载组件 -->\n        <XtxInfiniteLoading\n          :loading=\"loading\"\n          :finished=\"finished\"\n          @infinite=\"loadMore\"\n        />\n      </div>\n    </div>\n  </AppLayout>\n</template>\n\n<script>\nimport AppLayout from \"@/components/AppLayout\";\nimport { useStore } from \"vuex\";\nimport { onBeforeRouteUpdate, useRoute } from \"vue-router\";\nimport { computed, ref, watch } from \"vue\";\nimport SubFilter from \"@/views/category/components/SubFilter\";\nimport SubSort from \"@/views/category/components/SubSort\";\nimport GoodsList from \"@/views/category/components/GoodsList\";\nimport { getGoodsList } from \"@/api/category\";\nexport default {\n  name: \"SubCategoryPage\",\n  components: { GoodsList, SubSort, SubFilter, AppLayout },\n  setup() {\n    // 获取面包屑导航需要的分类数据\n    const category = useBread();\n    // 获取商品数据\n    const { goodsList, onFilterSortChanged, loadMore, loading, finished } =\n      useGoodsList();\n\n    return {\n      category,\n      goodsList,\n      onFilterSortChanged,\n      loadMore,\n      loading,\n      finished,\n    };\n  },\n};\n\nfunction useBread() {\n  // 获取 store 对象\n  const store = useStore();\n  // 获取 route 对象\n  const route = useRoute();\n  // 根据二级分类 id 查找二级分类和一级分类\n  return computed(() => {\n    // 用于存储一级分类和二级分类的对象\n    const result = {};\n    // 遍历一级分类\n    store.state.category.list.forEach((topCategory) => {\n      // 遍历二级分类\n      topCategory.children?.forEach((subCategory) => {\n        // 查找当前二级分类\n        if (subCategory.id === route.params.id) {\n          // 存储一级分类\n          result.topCategory = {\n            name: topCategory.name,\n            id: topCategory.id,\n          };\n          // 存储二级分类\n          result.subCategory = {\n            name: subCategory.name,\n            id: subCategory.id,\n          };\n        }\n      });\n    });\n    // 返回结果\n    return result;\n  });\n}\n\nfunction useGoodsList() {\n  // 用于存储从服务器端获取来的商品数据\n  const goodsList = ref();\n  // 获取路由信息对象\n  const route = useRoute();\n  // 获取商品列表时用到的请求参数\n  const reqParams = ref({ categoryId: route.params.id, page: 0, pageSize: 5 });\n  // 控制加载状态\n  const loading = ref(false);\n  // 控制无更多数据可以加载的状态\n  const finished = ref(false);\n  // 用于获取商品列表的方法\n  const getData = () => {\n    // 更新加载状态\n    loading.value = true;\n    // 向服务器端发送请求获取商品列表\n    getGoodsList(reqParams.value).then((data) => {\n      // 存储商品数据\n      if (reqParams.value.page === 1) {\n        goodsList.value = data.result;\n        // 当页码重置为1时, 重置 finished\n        finished.value = false;\n      } else {\n        goodsList.value = {\n          ...data.result,\n          items: [...goodsList.value.items, ...data.result.items],\n        };\n      }\n      // 更新加载状态\n      loading.value = false;\n      // 如果当前页已经是最后一页了\n      if (\n        reqParams.value.page === data.result.pages ||\n        data.result.pages === 0\n      ) {\n        finished.value = true;\n      }\n      // console.log(goodsList.value);\n    });\n  };\n  // 加载更多\n  const loadMore = () => {\n    // 当前页加一\n    reqParams.value = {\n      ...reqParams.value,\n      page: reqParams.value.page + 1,\n    };\n  };\n  // 当筛选条件和排序条件发生变化时\n  const onFilterSortChanged = (target) => {\n    reqParams.value = {\n      ...reqParams.value,\n      ...target,\n      page: 1,\n    };\n  };\n  // 初始调用获取商品列表\n  watch(\n    () => reqParams.value,\n    () => {\n      getData();\n    }\n  );\n  // 当路由参数发生变化以后\n  onBeforeRouteUpdate((to) => {\n    // 更改获取商品列表的请求参数 (分类id)\n    reqParams.value = {\n      categoryId: to.params.id,\n      page: 1,\n    };\n  });\n  return {\n    goodsList,\n    getData,\n    onFilterSortChanged,\n    loadMore,\n    loading,\n    finished,\n  };\n}\n</script>\n\n<style scoped lang=\"less\">\n.goods-list {\n  background: #fff;\n  padding: 0 25px;\n  margin-top: 25px;\n}\n</style>\n","<template>\n  <!-- 筛选区 -->\n  <div v-if=\"filters && !filterLoading\" class=\"sub-filter\">\n    <div class=\"item\">\n      <div class=\"head\">品牌：</div>\n      <div class=\"body\">\n        <a\n          href=\"javascript:\"\n          v-for=\"brand in filters?.brands\"\n          :key=\"brand.id\"\n          :class=\"{ active: filters.selectedBrandId === brand.id }\"\n          @click=\"\n            filters.selectedBrandId = brand.id;\n            updateSelectedFilters();\n          \"\n          >{{ brand.name }}</a\n        >\n      </div>\n    </div>\n    <div class=\"item\" v-for=\"item in filters?.saleProperties\" :key=\"item.id\">\n      <div class=\"head\">{{ item.name }}：</div>\n      <div class=\"body\">\n        <a\n          href=\"javascript:\"\n          v-for=\"property in item.properties\"\n          :key=\"property.id\"\n          :class=\"{ active: property.name === item.selectedFilterName }\"\n          @click=\"\n            item.selectedFilterName = property.name;\n            updateSelectedFilters();\n          \"\n          >{{ property.name }}</a\n        >\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"sub-filter\">\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\" />\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\" />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\n  </div>\n</template>\n<script>\nimport { ref } from \"vue\";\nimport { getSubCategoryFilters } from \"@/api/category\";\nimport { onBeforeRouteUpdate, useRoute } from \"vue-router\";\n\nexport default {\n  name: \"SubFilter\",\n  setup(props, { emit }) {\n    // 获取路由信息对象\n    const route = useRoute();\n    const { filters, getData, updateSelectedFilters, filterLoading } =\n      useFilters(emit);\n    // 发送请求获取筛选条件\n    getData(route.params.id);\n    return { filters, updateSelectedFilters, filterLoading };\n  },\n};\n// 获取筛选条件\nfunction useFilters(emit) {\n  // 用于存储最终的筛选条件数据\n  const filters = ref();\n  // 表示是否正在加载数据\n  const filterLoading = ref(false);\n  // 用于存储汇总的用户选择的筛选条件\n  const selectedFilters = {\n    brandId: null,\n    attrs: [],\n  };\n  // 汇总用户选择的筛选条件\n  const updateSelectedFilters = () => {\n    // 汇总用户选择的品牌id\n    selectedFilters.brandId = filters.value.selectedBrandId;\n    // 清除原有的筛选条件数据\n    selectedFilters.attrs = [];\n    // 汇总用户选择的其他筛选条件\n    filters.value.saleProperties.forEach((item) => {\n      // 如果用户选择了筛选条件并且用户选择的筛选条件不是\"全部\"\n      if (item.selectedFilterName && item.selectedFilterName !== \"全部\") {\n        // 将用户选择的筛选条件存储在 attrs 数组中\n        selectedFilters.attrs.push({\n          // 筛选类别的名字\n          groupName: item.name,\n          // 筛选条件的名字\n          propertyName: item.selectedFilterName,\n        });\n      }\n    });\n    // 将用户选择的筛选条件传递到父组件 以备后续使用\n    emit(\"onFilterChanged\", selectedFilters);\n  };\n  // 用于获取筛选条件的方法\n  const getData = (id) => {\n    // 更新加载状态\n    filterLoading.value = true;\n    // 向服务器端发送请求获取筛选条件数据\n    getSubCategoryFilters(id).then((data) => {\n      // 在品牌筛选选项的前面加入\"全部\"筛选条件\n      data.result.brands.unshift({ name: \"全部\", id: null });\n      // 设置默认选中的品牌的ID\n      data.result.selectedBrandId = null;\n      data.result.saleProperties // 在其他筛选选项的前面加入\"全部\"筛选条件\n        .forEach((item) => {\n          item.properties.unshift({ name: \"全部\", id: null });\n          // 设置默认选中的筛选条件的名字\n          item.selectedFilterName = \"全部\";\n        });\n      // 存储筛选条件数据\n      filters.value = data.result;\n      // 更新加载状态\n      filterLoading.value = false;\n    });\n  };\n  // 监听路由参数的变化, 当路由参数发生变化以后重新获取筛选条件数据\n  onBeforeRouteUpdate((to) => getData(to.params.id));\n  return { filters, getData, updateSelectedFilters, filterLoading };\n}\n</script>\n<style scoped lang=\"less\">\n// 筛选区\n.sub-filter {\n  background: #fff;\n  padding: 25px;\n  .item {\n    display: flex;\n    line-height: 40px;\n    .head {\n      width: 80px;\n      color: #999;\n    }\n    .body {\n      flex: 1;\n      a {\n        margin-right: 36px;\n        transition: all 0.3s;\n        display: inline-block;\n        &.active,\n        &:hover {\n          color: @xtxColor;\n        }\n      }\n    }\n  }\n}\n.xtx-skeleton {\n  padding: 10px 0;\n}\n</style>\n","import { render } from \"./SubFilter.vue?vue&type=template&id=47363b3d&scoped=true\"\nimport script from \"./SubFilter.vue?vue&type=script&lang=js\"\nexport * from \"./SubFilter.vue?vue&type=script&lang=js\"\n\nimport \"./SubFilter.vue?vue&type=style&index=0&id=47363b3d&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/Little-Rabbit-web/Little-Rabbit-web/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-47363b3d\"]])\n\nexport default __exports__","<template>\n  <div className=\"sub-sort\">\n    <div className=\"sort\">\n      <a\n        @click=\"updateSortParams({ sortField: '', sortMethod: 'desc' })\"\n        href=\"javascript:\"\n        :class=\"{ active: sortParams.sortField === '' }\"\n        >默认排序</a\n      >\n      <a\n        @click=\"updateSortParams({ sortField: 'publishTime' })\"\n        href=\"javascript:\"\n        :class=\"{ active: sortParams.sortField === 'publishTime' }\"\n        >最新商品</a\n      >\n      <a\n        @click=\"updateSortParams({ sortField: 'orderNum' })\"\n        href=\"javascript:\"\n        :class=\"{ active: sortParams.sortField === 'orderNum' }\"\n        >最高人气</a\n      >\n      <a\n        @click=\"updateSortParams({ sortField: 'evaluateNum' })\"\n        href=\"javascript:\"\n        :class=\"{ active: sortParams.sortField === 'evaluateNum' }\"\n        >评论最多</a\n      >\n      <a\n        href=\"javascript:\"\n        @click=\"\n          updateSortParams({\n            sortField: 'price',\n            sortMethod: sortParams.sortMethod === 'desc' ? 'asc' : 'desc',\n          })\n        \"\n      >\n        价格排序\n        <i\n          :class=\"{ active: sortParams.sortMethod === 'asc' }\"\n          class=\"arrow up\"\n        ></i>\n        <i\n          class=\"arrow down\"\n          :class=\"{ active: sortParams.sortMethod === 'desc' }\"\n        ></i>\n      </a>\n    </div>\n    <div className=\"check\">\n      <XtxCheckbox\n        v-model=\"sortParams.inventory\"\n        @update:modelValue=\"updateSortParams({ inventory: $event })\"\n        >仅显示有货商品</XtxCheckbox\n      >\n      <XtxCheckbox\n        v-model=\"sortParams.onlyDiscount\"\n        @update:modelValue=\"updateSortParams({ onlyDiscount: $event })\"\n        >仅显示特惠商品</XtxCheckbox\n      >\n    </div>\n  </div>\n</template>\n<script>\nimport { ref } from \"vue\";\n\nexport default {\n  name: \"SubSort\",\n  setup(props, { emit }) {\n    // 排序条件\n    // 更新排序的方法\n    const { sortParams, updateSortParams } = useSort(emit);\n    return { sortParams, updateSortParams };\n  },\n};\n\nfunction useSort(emit) {\n  // 排序条件\n  const sortParams = ref({\n    // 排序字段\n    sortField: \"\",\n    // 排序方法\n    sortMethod: \"desc\",\n    // 库存\n    inventory: false,\n    // 特惠\n    onlyDiscount: false,\n  });\n  // 更新排序的方法\n  // {sortField: \"publishTime\"}\n  const updateSortParams = (target) => {\n    // 使用最新的排序条件覆盖原有的排序条件\n    sortParams.value = {\n      ...sortParams.value,\n      ...target,\n    };\n    // 将用户选择的排序条件传递给父组件\n    emit(\"onSortChanged\", sortParams.value);\n  };\n  return { sortParams, updateSortParams };\n}\n</script>\n<style scoped lang=\"less\">\n.sub-sort {\n  height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  .sort {\n    display: flex;\n\n    a {\n      height: 30px;\n      line-height: 28px;\n      border: 1px solid #e4e4e4;\n      padding: 0 20px;\n      margin-right: 20px;\n      color: #999;\n      border-radius: 2px;\n      position: relative;\n      transition: all 0.3s;\n\n      &.active {\n        background: @xtxColor;\n        border-color: @xtxColor;\n        color: #fff;\n      }\n\n      .arrow {\n        position: absolute;\n        border: 5px solid transparent;\n        right: 8px;\n\n        &.up {\n          top: 3px;\n          border-bottom-color: #bbb;\n\n          &.active {\n            border-bottom-color: @xtxColor;\n          }\n        }\n\n        &.down {\n          top: 15px;\n          border-top-color: #bbb;\n\n          &.active {\n            border-top-color: @xtxColor;\n          }\n        }\n      }\n    }\n  }\n\n  .check {\n    .xtx-checkbox {\n      margin-left: 20px;\n      color: #999;\n    }\n  }\n}\n</style>\n","import { render } from \"./SubSort.vue?vue&type=template&id=a2bbccea&scoped=true\"\nimport script from \"./SubSort.vue?vue&type=script&lang=js\"\nexport * from \"./SubSort.vue?vue&type=script&lang=js\"\n\nimport \"./SubSort.vue?vue&type=style&index=0&id=a2bbccea&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/Little-Rabbit-web/Little-Rabbit-web/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a2bbccea\"]])\n\nexport default __exports__","<template>\n  <ul>\n    <li v-for=\"item in goods\" :key=\"item.id\">\n      <GoodsItem :goods=\"item\" />\n    </li>\n  </ul>\n</template>\n<script>\nimport GoodsItem from \"@/views/category/components/GoodsItem\";\nexport default {\n  name: \"GoodsList\",\n  components: { GoodsItem },\n  props: {\n    goods: {\n      type: Array,\n      default: () => [],\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\nul {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 0 5px;\n  li {\n    margin-right: 20px;\n    margin-bottom: 20px;\n    &:nth-child(5n) {\n      margin-right: 0;\n    }\n  }\n}\n</style>\n","import { render } from \"./GoodsList.vue?vue&type=template&id=6b7e7fba&scoped=true\"\nimport script from \"./GoodsList.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsList.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsList.vue?vue&type=style&index=0&id=6b7e7fba&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/Little-Rabbit-web/Little-Rabbit-web/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b7e7fba\"]])\n\nexport default __exports__","import { render } from \"./SubCategoryPage.vue?vue&type=template&id=768ac092&scoped=true\"\nimport script from \"./SubCategoryPage.vue?vue&type=script&lang=js\"\nexport * from \"./SubCategoryPage.vue?vue&type=script&lang=js\"\n\nimport \"./SubCategoryPage.vue?vue&type=style&index=0&id=768ac092&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/Little-Rabbit-web/Little-Rabbit-web/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-768ac092\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SubFilter.vue?vue&type=style&index=0&id=47363b3d&scoped=true&lang=less\"","import { requestWithoutToken } from \"@/utils/request\";\n\n/**\n * 获取一级分类的具体信息\n * @param id 一级分类ID\n * @return {Promise}\n */\nexport function getTopCategoryById(id) {\n  return requestWithoutToken(\"/category\", \"get\", { id });\n}\n\n/**\n * 获取二级分类筛选条件\n * @param id 二级分类ID\n * @return {Promise}\n */\nexport function getSubCategoryFilters(id) {\n  return requestWithoutToken(\"/category/sub/filter\", \"get\", { id });\n}\n\n/**\n * 获取二级分类商品列表\n * @param reqParams 请求参数: 二级分类ID, 排序条件, 筛选条件、分页信息\n * @return {Promise}\n */\nexport function getGoodsList(reqParams) {\n  return requestWithoutToken(\"/category/goods\", \"post\", reqParams);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SubCategoryPage.vue?vue&type=style&index=0&id=768ac092&scoped=true&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GoodsItem.vue?vue&type=style&index=0&id=bef1b662&scoped=true&lang=less\""],"sourceRoot":""}